import { Meta, Story, Source, Canvas, Controls } from '@storybook/blocks';
import { html } from 'lit';
import * as NysCheckboxStories from './nys-checkbox.stories';

<Meta of={NysCheckboxStories} title="Components/Checkbox/Documentation" />

# Checkbox

The **`nys-checkbox`** component is a reusable web component for use in New York State digital products. It provides users with the ability to toggle a binary state (checked/unchecked).
- If an `id` is not passed, a unique `id` will be generated.
- Optional: **`nys-checkboxgroup`** can be used to group multiple checkboxes so they function as a single form control.

<p className="pill pill--stable">Stable</p>

<p className="pill pill--uikit"><a target="_blank" href="https://www.figma.com/design/0ogYpymUPQQfhELthntNbt/%F0%9F%92%A0-NYSDS-%2F-Components?node-id=3568-16672&m=dev">View in Figma</a></p>

***

<Canvas of={NysCheckboxStories.Basic} />

<Controls />

### Variants
#### Grouping
⚠️ Important: While optional, you may find wrapping checkboxes with **`nys-checkboxgroup`** helpful for multiple selections with the same checkbox name. This ensures they function as a single form control visually & in validation.
<Canvas of={NysCheckboxStories.Grouping} />
#### Disabled
<Canvas of={NysCheckboxStories.Disabled} />
#### Size
Set the `size` prop of the **`nys-checkboxgroup`** to have all **`nys-checkbox`** be the same size. Our current sizes are:
- `sm`: Set to 24px in width and height
- `md`: The default size. Set to 32px in width and height.
<Canvas of={NysCheckboxStories.Size} />
#### Required
<Canvas of={NysCheckboxStories.Required} />
#### Error Message
The error message will appear **ONLY** when the `showError` attribute is set to `true`. Setting `errorMessage` will not display the error message by default.
<Canvas of={NysCheckboxStories.ErrorMessage} />
#### Slots
When the description requires more complexity than a simple `string` value, use the slot `description` to hold the text. This allows the developer to include HTML in the description, such as `<a>` or `<strong>`
<Canvas of={NysCheckboxStories.Slot} />
#### Checkbox Group
<Canvas of={NysCheckboxStories.CheckboxGroup} />

## Usage

### When to use this component
- When collecting yes/no answers.
- When obtaining confirmation from users.
- When allowing users to select multiple options from a list.

### When to consider something else
- When users need to select only one option (consider a [radio button](?path=/docs/components-radiobutton--docs) instead).

<div className="nys-grid-row nys-grid-gap-lg">
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--do">
      ### <nys-icon name="check_circle" color="--var(nys-color-success)" /> Do 
      - Use checkboxes for binary decisions (agree/disagree).
      - Use checkboxes for multi-select lists (like selecting interests).
    </div>
  </div>
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--dont">
      ### <nys-icon name="error" color="--var(nys-color-warning)" /> Don't
      - Use checkboxes when users should choose only one option.
    </div>
  </div>
</div>

## Accessibility

The `nys-checkbox` component includes the following accessibility-focused features:

- Proper ARIA roles and attributes to ensure screen readers can interpret the checkbox correctly.
- Keyboard navigation support, allowing users to toggle the checkbox using the keyboard.
- Visual focus indicators to help users navigate the component.

## Events

The `NysCheckbox` component emits three custom events:

1. **`change`** – Fired when the checkbox state changes (checked/unchecked).
2. **`focus`** – Fired when the checkbox gains focus.
3. **`blur`** – Fired when the checkbox loses focus.
4. **`keydown`** – Fired when a key is pressed while the checkbox is focused.

You can listen to these events using JavaScript:

```js

  // Select the checkbox component
  const checkbox = document.querySelector('nys-checkbox');

  // Listen for the 'change' event
  checkbox.addEventListener('change', (event) => {
    console.log('Checkbox changed:', event.target.checked);
  });

  // Listen for the 'focus' event
  checkbox.addEventListener('focus', () => {
    console.log('Checkbox is focused');
  });

  // Listen for the 'blur' event
  checkbox.addEventListener('blur', () => {
    console.log('Checkbox lost focus');
  });

  // Listen for the 'keydown' event
  checkbox.addEventListener('keydown', (event) => {
    console.log('Key pressed:', event.key);
  });
```

## Slots

<table>
    <thead>
    <tr>
        <th>Slot name</th>
        <th>Description</th>
        <th>Default value</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>`description`</td>
        <td>Description text for either `nys-checkbox` or `nys-checkboxgroup`</td>
        <td>none</td>
    </tr>
    </tbody>
</table>

## Dependencies
This component automatically imports the following dependencies.

- `<nys-icon>`

import { Meta, Story, Source, Canvas, Controls } from '@storybook/addon-docs/blocks';
import { html } from 'lit';
import * as NysCheckboxStories from './nys-checkbox.stories';
import "@nysds/nys-icon";
import '@nysds/nys-badge';

<Meta of={NysCheckboxStories} title="Components/Checkbox/Documentation" />

# Checkbox

The **`nys-checkbox`** component is a reusable web component for use in New York State digital products. It provides users with the ability to toggle a binary state (checked/unchecked).
- If an `id` is not passed, a unique `id` will be generated.
- Optional: **`nys-checkboxgroup`** can be used to group multiple checkboxes so they function as a single form control.

<div className="nys-grid-row nys-grid-gap-1">
  <nys-badge label="Stable" prefixIcon="code"></nys-badge>
  <nys-badge
    prefixIcon
    prefixLabel="WCAG 2.2"
    label="AA"
    intent="success"
  ></nys-badge>
<p className="pill pill--uikit"><a target="_blank" href="https://www.figma.com/design/0ogYpymUPQQfhELthntNbt?node-id=4808-7102">View in Figma</a></p>
</div>

***

<Canvas of={NysCheckboxStories.Basic} />

<Controls />

## Options
### Checkbox Grouping
⚠️ Important: While optional, you may find wrapping checkboxes with **`nys-checkboxgroup`** helpful for multiple selections with the same checkbox name. This ensures they function as a single form control visually & in validation.
- When using **`nys-checkboxgroup`**, you can add `errorMessage` and `required` at the group level instead of on individual `nys-checkbox`.
- For grouping to work correctly, all `nys-checkbox` elements within the same **`nys-checkboxgroup`** must have the same name attribute. This allows the form to recognize them as a related set of options.
<Canvas of={NysCheckboxStories.Grouping} />

### Disabled
<Canvas of={NysCheckboxStories.Disabled} />
#### Size
Set the `size` prop of the **`nys-checkboxgroup`** to have all **`nys-checkbox`** be the same size. Our current sizes are:
- `sm`: Set to 24px in width and height
- `md`: The default size. Set to 32px in width and height.
<Canvas of={NysCheckboxStories.Size} />
### Tile
The `tile` prop will change the styling of the checkbox to a tile. This is useful when you want a larger clickable area for the user.\
- The `tile` prop can be applied to the `nys-checkboxgroup` or the `nys-checkbox` component. If applied to the `nys-checkboxgroup`, all checkboxes will be displayed as tiles. If applied to the `nys-checkbox`, only that checkbox will be displayed as a tile.
- Do not use the `tile` prop on a checkbox if it is inside a `nys-checkboxgroup`. All checkboxes in a group should be the same size and style.
<Canvas of={NysCheckboxStories.Tile} />
### Required
<Canvas of={NysCheckboxStories.Required} />
### Optional
Adding the `optional` prop will add an optional flag to the input.
<Canvas of={NysCheckboxStories.Optional} />
### Error Message
The error message will appear **ONLY** when the `showError` attribute is set to `true`. Setting `errorMessage` will not display the error message by default.
<Canvas of={NysCheckboxStories.ErrorMessage} />
### Slots
When the description requires more complexity than a simple `string` value,  add your HTML content directly within the component as slot content, rather than setting a `description` prop. This allows the developer to include HTML in the description, such as `<a>` or `<strong>`
<Canvas of={NysCheckboxStories.Slot} />
## Invert
Set the `invert` when the component is on a dark background. \
You can set `invert` on `nys-checkboxgroup` to apply it to all checkboxes, or on a single `nys-checkbox` if only one needs it.
<Canvas of={NysCheckboxStories.Invert} />

## Usage

### When to use this component
- When collecting yes/no answers.
- When obtaining confirmation from users.
- When allowing users to select multiple options from a list.

### When to consider something else
- When users need to select only one option (consider a [radio button](?path=/docs/components-radiobutton--docs) instead).

<div className="nys-grid-row nys-grid-gap-lg">
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--do">
      ### <nys-icon name="check_circle" color="var(--nys-color-success)" /> Do
      - Use checkboxes for binary decisions (agree/disagree).
      - Use checkboxes for multi-select lists (like selecting interests).
    </div>
  </div>
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--dont">
      ### <nys-icon name="error" color="var(--nys-color-danger)" /> Don't
      - Use checkboxes when users should choose only one option.
    </div>
  </div>
</div>

## Accessibility

The `nys-checkbox` component includes the following accessibility-focused features:

- Proper ARIA roles and attributes to ensure screen readers can interpret the checkbox correctly.
- Keyboard navigation support, allowing users to toggle the checkbox using the keyboard.
- Visual focus indicators to help users navigate the component.

## Events

The `NysCheckbox` component emits three custom events:

1. **`nys-change`** – Fired when the checkbox state changes (checked/unchecked).
2. **`nys-focus`** – Fired when the checkbox gains focus.
3. **`nys-blur`** – Fired when the checkbox loses focus.

**Event details** \
The event’s `detail` object includes:
- id (string): The id of the checkbox.
- checked (boolean): Whether the checkbox is currently checked.
- name (string): The checkbox’s name attribute (useful in forms).
- value (string): The checkbox’s value attribute.

You can listen to these events using JavaScript:

```js

  // Select the checkbox component
  const checkbox = document.querySelector('nys-checkbox');

  // Listen for the 'nys-change' event
  checkbox.addEventListener('nys-change', (event) => {
    const { checked, name, value } = event.detail;
    console.log(`Checkbox changed: checked=${checked}, name=${name}, value=${value}`);
  });

  // Listen for the 'nys-focus' event
  checkbox.addEventListener('nys-focus', () => {
    console.log('Checkbox is focused');
  });

  // Listen for the 'nys-blur' event
  checkbox.addEventListener('nys-blur', () => {
    console.log('Checkbox lost focus');
  });
```

## Dependencies
This component automatically imports the following dependencies.

- `<nys-icon>`

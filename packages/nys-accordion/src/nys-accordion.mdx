import { Meta, Story, Source, Canvas, Controls } from "@storybook/addon-docs/blocks";
import { html } from "lit";
import * as NysAccordionStories from "./nys-accordion.stories";

<Meta of={NysAccordionStories} title="Components/Accordion/Documentation" />

# Accordion

The **`nys-accordion`** component is a vertically stacked list of headers that can be clicked to reveal or hide associated content, helping to organize and condense information.

If an id is not passed, a unique id will be generated.

<p className="pill pill--stable">Stable</p>

<p className="pill pill--wcag">WCAG 2.2 AA</p>

<p className="pill pill--uikit">
	<a href="https://www.figma.com/design/TODO/add/url" target="_blank">View in Figma</a>
</p>

---

<Canvas of={NysAccordionStories.Basic} />

<Controls />

## Options

### Individual Accordion
The `nys-accordion` is an individual component that toggles open or closed internally via the `expanded` prop.
This prop is also available for developers to control the expanded state directly, without needing to wrap it in a `nys-accordiongroup`.
<Canvas of={NysAccordionStories.IndividualAccordion} />

### Accordion Group
The `nys-accordiongroup` is a wrapper that provides a boolean prop called `singleSelect`.
When `singleSelect` is set, only one accordion within the group can be open at a time.
<Canvas of={NysAccordionStories.AccordionGroup} />


### Bordered
The `bordered` prop is available on both `nys-accordion` and `nys-accordiongroup`.
When applied to the `nys-accordiongroup`, all accordions within the group will be bordered.
<Canvas of={NysAccordionStories.Bordered} />

## Usage

### When to use this component
- Use an accordion when you need to organize related information into expandable sections, reducing the need for users to scroll through long content.
- Ideal for FAQs, application instructions, program eligibility requirements, or step-by-step guides where only one section may be needed at a time.
- Helpful in mobile layouts to keep pages compact while still allowing access to full details.

### When to consider something else
- Do not hide essential information, such as critical deadlines, eligibility criteria, or urgent alerts, inside collapsed panels — keep these visible by default.
- If users need to compare details from multiple sections at once, consider using a table or side-by-side layout instead of an accordion.

<div className="nys-grid-row nys-grid-gap-lg">
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--do">
      ### <nys-icon name="check_circle" color="var(--nys-color-success)" /> Do
      - Use accordions for FAQs on state services, like DMV procedures or benefits information.
      - Use to break up long program descriptions into manageable sections without overwhelming the reader.
      - Label headings clearly so users understand the content before expanding.
    </div>
  </div>
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--dont">
      ### <nys-icon name="error" color="var(--nys-color-danger)" /> Don't
      - Don't hide time-sensitive deadlines or required steps in a collapsed section.
      - Don't use vague or unclear headings that make it hard to know what is inside.
      - Don't overuse accordions for content that is short enough to display fully on the page.
    </div>
  </div>
</div>

## Accessibility

The `nys-accordion` component includes the following accessibility-focused features:

- Keyboard navigation (e.g. Tab to move between headers, Enter or Space to toggle).
- Headers are large enough to interact with easily (minimum 44x44px).


## Events

The `nys-accordion` component emits the following events:

1. `nys-toggle`: Emitted when the accordion is clicked.

**Event details** \
The event includes a detail object with the following properties:
- id (string): The id of the accordion.
- heading (string): The accordion’s heading text.
- expanded (boolean): true if the accordion is expanded, otherwise false.

You can listen to these events using JavaScript:

```js
// Select the accordion component
const accordion = document.querySelector("nys-accordion");

// Listen for the 'nys-toggle' event
accordion.addEventListener("nys-toggle", () => {
	console.log("Accordion toggled");
	console.log("Accordion details:", event.detail);
});
```

## Dependencies

This component automatically imports the following dependencies.

- `<nys-icon>`

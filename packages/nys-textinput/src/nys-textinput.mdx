import { Meta, Story, Source, Canvas, Controls } from '@storybook/blocks';
import { html } from 'lit';
import * as NysTextinputStories from './nys-textinput.stories';

<Meta of={NysTextinputStories} title="Components/Textinput/Documentation" />


# Text Input

The **`nys-textinput`** is a reusable web component for use in New York State digital products. It allows users to input data to be collected.

<p className="pill pill--stable">Stable</p>

<p className="pill pill--uikit"><a target="_blank" href="https://www.figma.com/design/0ogYpymUPQQfhELthntNbt/%F0%9F%92%A0-NYSDS-%2F-Components?node-id=1613-5411&m=dev">View in Figma</a></p>

***

<Canvas of={NysTextinputStories.Basic} />

<Controls />

### Variants

#### Width
If no width is provided, the `nys-textinput` will default to `full`. Supported widths are `sm`, `md`, `lg`, and `full`.\
Width `full` will take up the full width of the parent container.\
If an invalid option is assigned to `width`, it will be ignored and default to `full`.
<Canvas of={NysTextinputStories.Width} />
#### Different Input Types
Note: Accepted types are: `text` `email` `number` `password` `search` `tel` `url`\
Any other input defaults to `type="text"`
<Canvas of={NysTextinputStories.Password} />
#### Values and Placeholders
<Canvas of={NysTextinputStories.ValueAndPlaceholder} />
#### Disabled and Readonly
<Canvas of={NysTextinputStories.Disabled} />
<Canvas of={NysTextinputStories.Readonly} />
#### Max Min and Step
Note: `max` `min` `step` only apply when `type="number"`
<Canvas of={NysTextinputStories.MaxMinAndStep} />
#### Maxlength
<Canvas of={NysTextinputStories.Maxlength} />
#### Pattern
Note: Takes in valid regex 
<Canvas of={NysTextinputStories.Pattern} />
#### Required
<Canvas of={NysTextinputStories.Required} />
#### Optional
Adding the `optional` prop will add an optional flag to the input.
<Canvas of={NysTextinputStories.Optional} />
#### Description Slot
You can supply a description via our `description` prop for plain text or by embedding HTML within our component via our slot for higher customization.
<Canvas of={NysTextinputStories.DescriptionSlot} />
#### Slotted Button
Note: You can add a button to the input by adding a `slot="startButton"` or `slot="endButton"`.
This will add a button to the left or right of the input respectively.\
The button must be a `nys-button` component and one input should not add both a `startButton` and `endButton` to the same input.\
The slotted button will automatically be `size="sm"` and `variant="filled"` and support the disabled state of the input.\
When using a slotted button use either `<nys-textinput width="lg">` or `<nys-textinput width="full">` to ensure the input is wide enough for the user to see their input.
<Canvas of={NysTextinputStories.SlottedButton} />
#### Error Message
Note: in order to display an error message, you must pass in `hasError` to the component. Setting `errorMessage` does not display the message by default.
<Canvas of={NysTextinputStories.ErrorMessage} />

## Usage

### When to use this component
- To collect short, single-line text input from the user (e.g., names, email addresses, or short descriptions).
- For open-ended, user-specific input.

### When to consider something else
- If you need to collect multiple lines of input, use [textarea](?path=/docs/components-textarea--docs) instead.
- If the input can be chosen from predefined options, use [select](?path=/docs/components-select--docs), [radiobutton](?path=/docs/components-radiobutton--docs), or [checkbox](?path=/docs/components-checkbox--docs).

<div className="nys-grid-row nys-grid-gap-lg">
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--do">
      ### <nys-icon name="check_circle" color="--var(nys-color-success)" /> Do
      - Use clear and concise labels to describe the input required.
      - Provide helper text to guide the user, but don’t rely on placeholders as a substitute for labels.
      - Validate input in real-time to catch errors early (e.g., invalid email formats).
      - Use a logical default value when applicable (e.g., for a country or date field).
    </div>
  </div>
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--dont">
      ### <nys-icon name="error" color="--var(nys-color-warning)" /> Don't
      - Use single-line text inputs for collecting long or detailed text responses (use a [textarea](?path=/docs/components-textarea--docs)).
      - Overwhelm users with too many single-line inputs; group similar fields when possible.
    </div>
  </div>
</div>

## Accessibility

The `nys-textinput` component includes the following accessibility-focused features:

- Proper ARIA roles and attributes to ensure screen readers can interpret the label correctly.
- Keyboard navigation support, allowing users to tab into the input using the keyboard.
- Visual focus indicators to help users navigate the component.
 
 ## Events

The `nys-textinput` component emits the following events:

1. **`nys-input`** – Fired when the input text changes.
2. **`nys-focus`** – Fired when the input gains focus.
3. **`nys-blur`** – Fired when the input loses focus.

You can listen to these events using JavaScript:

```js

// Select the textinput component
const textinput = document.querySelector('nys-textinput');

// Listen for the 'nys-input' event
textinput.addEventListener('nys-input', (event) => {
  console.log('Text input changed:', event.detail.value);
});

// Listen for the 'nys-focus' event
textinput.addEventListener('nys-focus', () => {
  console.log('Text input is focused');
});

// Listen for the 'nys-blur' event
textinput.addEventListener('nys-blur', () => {
  console.log('Text input is blurred');
});
```
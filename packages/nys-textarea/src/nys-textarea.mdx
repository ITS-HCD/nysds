import { Meta, Story, Source, Canvas, Controls } from '@storybook/blocks';
import { html } from 'lit';
import * as NysTextareaStories from './nys-textarea.stories';

<Meta of={NysTextareaStories} title="Components/Textarea/Documentation" />


# Text Area
The **`nys-textarea`** is a reusable web component for use in New York State digital products. It allows users to input multiple lines of text to be collected.

<p className="pill pill--stable">Stable</p>

<p className="pill pill--uikit"><a target="_blank" href="https://www.figma.com/design/0ogYpymUPQQfhELthntNbt/%F0%9F%92%A0-NYSDS-%2F-Components?node-id=1616-7061&m=dev">View in Figma</a></p>

***

<Canvas of={NysTextareaStories.Basic} />

<Controls />

### Variants

### Basic Text Area

#### Width 
If no width is provided, the `nys-textarea` will default to `full`. Supported widths are `sm`, `md`, `lg`, and `full`.\
Width `full` will take up the full width of the parent container.\
If an invalid option is assigned to `width`, it will be ignored and default to `full`.
<Canvas of={NysTextareaStories.Width} />
#### Rows
The `rows` attribute specifies the visible height of a text area, in number of lines.\
The default value is `rows="4"`
<Canvas of={NysTextareaStories.Rows} />
#### Resize
By default the user can resize the `nys-textarea` vertically. If you want to disallow resizing altogether add `resize="none"`\
Note: resize is not affected by setting `nys-textarea` to `disabled` or `readonly` and they are independent.
<Canvas of={NysTextareaStories.Resize} />
#### Description Slot
You can supply a description via our `description` prop for plain text or by embedding HTML within our component via our slot for higher customization.
<Canvas of={NysTextareaStories.DescriptionSlot} />
#### Values and Placeholders
<Canvas of={NysTextareaStories.ValueAndPlaceholder} />
#### Disabled and Readonly
<Canvas of={NysTextareaStories.Disabled} />
<Canvas of={NysTextareaStories.Readonly} />
#### Maxlength
<Canvas of={NysTextareaStories.Maxlength} />
#### Required
<Canvas of={NysTextareaStories.Required} />
#### Optional
Adding the `optional` prop will add an optional flag to the input.
<Canvas of={NysTextareaStories.Optional} />
#### Error Message
<Canvas of={NysTextareaStories.ErrorMessage} />

## Usage

### When to use this component
- To collect **multiple lines of text input** from the user (e.g., comments, descriptions).
- For **open-ended input** specific to the user (e.g., personal notes, feedback).

### When to consider something else
- If you need to collect a **single line of text input**, use an input field instead.
- If the input should be **selected from predefined options**, use a dropdown or radio button.

<div className="nys-grid-row nys-grid-gap-lg">
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--do">
      ### <nys-icon name="check_circle" color="--var(nys-color-success)" /> Do 
      - Use the `nys-textarea` for **long-form text** like descriptions or detailed feedback.
      - Use the `nys-textarea` when **precise user input** is required in multiple lines.
    </div>
  </div>
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--dont">
      ### <nys-icon name="error" color="--var(nys-color-warning)" /> Don't
      - Don't use the `nys-textarea` for **short or single-line inputs** (use `nys-input` instead).
      - Don't use the `nys-textarea` for **data selection tasks** (e.g., dropdowns or predefined options).
    </div>
  </div>
</div>

## Accessibility

The `nys-textarea` component includes the following accessibility-focused features:

- Proper ARIA roles and attributes to ensure screen readers can interpret the label correctly.
- Keyboard navigation support, allowing users to tab into the input using the keyboard.
- Visual focus indicators to help users navigate the component.
 
## Events

The `nys-textarea` component emits the following events:

1. **`nys-input`** – Fired when the input text changes.
2. **`nys-focus`** – Fired when the input gains focus.
3. **`nys-blur`** – Fired when the input loses focus.
4. **`nys-select`** – Fired when the user selects text within the textarea.

You can listen to these events using JavaScript:

```js

// Select the textarea component
const textarea = document.querySelector('nys-textarea');

// Listen for the 'nys-input' event
textarea.addEventListener('nys-input', (event) => {
  console.log('Text input changed:', event.detail.value);
});

// Listen for the 'nys-focus' event
textarea.addEventListener('nys-focus', () => {
  console.log('Text input is focused');
});

// Listen for the 'nys-blur' event
textarea.addEventListener('nys-blur', () => {
  console.log('Text input is blurred');
});

// Listen for the 'nys-select' event
textarea.addEventListener('nys-select', (event) => {
  console.log('Text selected:', event.detail.value);
});
```
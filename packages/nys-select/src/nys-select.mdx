import { Meta, Story, Source, Canvas, Controls } from '@storybook/addon-docs/blocks';
import { html } from 'lit';
import * as NysSelectStories from './nys-select.stories';
import "@nysds/nys-icon";
import '@nysds/nys-badge';

<Meta of={NysSelectStories} title="Components/Select/Documentation" />

# Select **Component**

The **`nys-select`** is a reusable web component for use in New York State digital products. It allows users to select data from a dropdown to be collected. It accepts the child element `nys-option` to define the options in the dropdown.

<div className="nys-grid-row nys-grid-gap-1">
  <nys-badge label="Stable" prefixIcon="code"></nys-badge>
  <nys-badge
    prefixIcon
    prefixLabel="WCAG 2.2"
    label="AA"
    intent="success"
  ></nys-badge>
  <p className="pill pill--uikit"><a target="_blank" href="https://www.figma.com/design/U2QpuSUXRTxbgG64Fzi9bu?node-id=3981-9877">View in Figma</a></p>
</div>

***

<Canvas of={NysSelectStories.Basic} />

<Controls />

## Options
The `nys-option` can have the label set as either the label property or the inner text of the component. The rendered code will show the label as a property if set as inner text.
<Canvas of={NysSelectStories.OptionsLabelSlot} />
### Disabled
<Canvas of={NysSelectStories.Disabled} />
### Required
<Canvas of={NysSelectStories.Required} />
### Optional
Adding the `optional` prop will add an optional flag to the input.
<Canvas of={NysSelectStories.Optional} />
### Width
The following width options are available:
- `sm` (Small): 88px, ideal for compact layouts.
- `md` (Medium): 200px, ideal for balanced designs.
- `lg` (Large): 384px, suitable for displaying longer content.
- `full` (Full Width): default size. Expands to fill the available space.
<Canvas of={NysSelectStories.Width} />
### Description Slot
You can supply a description via our `description` prop for plain text or by embedding HTML within our component via our slot for higher customization.

<div style={{ display: 'flex', gap: '10px', verticalAlign: 'middle', alignItems: 'center'}}>  <nys-icon name="info" size="xl" style={{margin: '20px 0' }}></nys-icon> You must use `slot="description"` on your embedded HTML for it to work properly. </div>
<Canvas of={NysSelectStories.DescriptionSlot} />

### Error Message
In order to display an error message, you must pass in `showError` to the component. Setting `errorMessage` does not display the message by default.
<Canvas of={NysSelectStories.ErrorMessage} />

## Invert
Set the `invert` when the component is on a dark background.
<Canvas of={NysSelectStories.Invert} />

## Usage

### When to use this component
- When you need to collect data from a dropdown
- When you need to provide a list of options for users to select a single option from

### When to consider something else
- When you need to collect multiple items from a list

<div className="nys-grid-row nys-grid-gap-lg">
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--do">
      ### <nys-icon name="check_circle" color="var(--nys-color-success)" /> Do
      - Use the `nys-select` component when you need the user to select a single item from a list
      - Use the `nys-option` component to define the options in the dropdown
    </div>
  </div>
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--dont">
      ### <nys-icon name="error" color="var(--nys-color-danger)" /> Don't
      - Use the native `<option>` element in the `nys-select` component
      - Use `<nys-select multiple>` as an input for users to select multiple items from a dropdown. Consider a [checkbox group](?path=/docs/components-checkbox--docs) instead. More guidance from the <a className="usage-link" target="_blank" href="https://designsystem.digital.gov/components/select/#when-to-consider-something-else">US Web Design System</a>.
    </div>
  </div>
</div>

## Accessibility

The `nys-select` component includes the following accessibility-focused features:

- Proper ARIA roles and attributes to ensure screen readers can interpret the select dropdown correctly.
- Keyboard navigation support, allowing users to tab to the `<nys-select>` using the keyboard and spacebar to select an option.
- Visual focus indicators to help users navigate the component.

## Slots

The `nys-select` component supports the following slots:
<table>
    <thead>
    <tr>
        <th>Component</th>
        <th>Slot name</th>
        <th>Description</th>
        <th>Default value</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>`nys-select`</td>
        <td>`description`</td>
        <td>Description for the select component</td>
        <td>None</td>
    </tr>
    <tr>
        <td>`nys-option`</td>
        <td>default</td>
        <td>Displayed text of option</td>
        <td>None</td>
    </tr>
    </tbody>
</table>

## Events
The `nys-select` component emits the following events:

1. **`nys-change`**: Emitted when the value of the select changes. The event detail includes the value of the selected option.
2. **`nys-focus`**: Emitted when the select gains focus.
3. **`nys-blur`**: Emitted when the select loses focus.

**Event details** \
The eventâ€™s `detail` object includes:
- id (string): The id of the select.
- value (string): The value of the selected option.

You can listen for these events using the `addEventListener` method on the `nys-select` element.

```js

//Select the select component
const select = document.querySelector('nys-select');

//Listen for the 'nys-change' event
select.addEventListener('nys-change', (event) => {
  const { id, value } = event.detail;
  console.log(`Select (${id}) changed to: ${value}`);
});

//Listen for the 'focus' event
select.addEventListener('nys-focus', () => {
  console.log('Select is focused');
});

//Listen for the 'nys-blur' event
select.addEventListener('nys-blur', () => {
  console.log('Select lost focus');
});

```

## Dependencies
This component automatically imports the following dependencies.
- `<nys-icon>`

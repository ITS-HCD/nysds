import { Meta, Story, Source, Canvas, Controls } from "@storybook/addon-docs/blocks";
import { html } from "lit";
import * as NysToggleStories from "./nys-toggle.stories";
import "@nysds/nys-icon";
import '@nysds/nys-badge';

<Meta of={NysToggleStories} title="Components/Toggle/Documentation" />

# Toggle
The **`nys-toggle`** component is a reusable web component for use in New York State digital products. It allows users to toggle a toggle switch "on" or "off".

If an id is not passed, a unique id will be generated.

<div className="nys-grid-row nys-grid-gap-1">
  <nys-badge label="Stable" prefixIcon="code"></nys-badge>
  <nys-badge
    prefixIcon
    prefixLabel="WCAG 2.2"
    label="AA"
    intent="success"
  ></nys-badge>
  <p className="pill pill--uikit"><a target="_blank" href="https://www.figma.com/design/U2QpuSUXRTxbgG64Fzi9bu?node-id=3981-9988">View in Figma</a></p>
</div>

***

<Canvas of={NysToggleStories.Basic} />

<Controls />


## Variants
### Checked
<Canvas of={NysToggleStories.Checked} />

### Help Text
Add descriptive help text using the `label` and/or `description` prop for the toggle component. \
Descriptions can be provided **BOTH** as a property or a slot. Use the `description` property for simplicity, and reserve `slot="description"` for advanced HTML customizations like links.
<Canvas of={NysToggleStories.HelpTexts} />

### Unchecked Disabled
<Canvas of={NysToggleStories.UncheckedDisabled} />

### Checked Disabled
<Canvas of={NysToggleStories.CheckedDisabled} />

### Sizes
Adjust the `size` property to see how it changes the toggle's appearance. \
Supported sizes are `sm` and `md`. **Default size for toggle component is `md`.**
<Canvas of={NysToggleStories.Sizes} />

### Disabling Icons
To remove icons from the toggle switch, use the `NoIcons` boolean property.
<Canvas of={NysToggleStories.NoIcons} />

## Invert
Set the `invert` when the component is on a dark background.
<Canvas of={NysToggleStories.Invert} />

## Usage

### When to use this component
  - Consider using `nys-toggle` when expecting immediate UI effects when turning switch on/off.
  - Ideal for settings pages, feature toggles, or user preferences.

### When to consider something else
  - Consider using `nys-checkbox` or `nys-radiobutton` to select one or more options from a list where the selections
  - Use `nys-checkbox` for forms, especially when you're not expecting immediate action.

<div className="nys-grid-row nys-grid-gap-lg">
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--do">
      ### <nys-icon name="check_circle" color="var(--nys-color-success)" /> Do
      - Provide a clear label and optional description to explain the toggle's purpose.
      - Show the UI for toggle’s state is visually distinct for on/off positions.
    </div>
  </div>
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--dont">
      ### <nys-icon name="error" color="var(--nys-color-danger)" /> Don't
      - Use toggles for complex multi-state options.
      - Overuse toggles for trivial settings that do not impact user experience significantly.
      - Hide labels entirely unless another accessible method of describing the toggle exists.
    </div>
  </div>
</div>

## Form Prop
The form attribute associates the `nys-toggle` component with a specific `<form>` element, regardless of its location on the page. This ensures that the toggle's state is included in the form submission, whether it is inside the `<form>` element or outside it.

## Accessibility

The `nys-toggle` component includes the following accessibility-focused features:

- Proper ARIA roles and attributes to ensure screen readers can interpret the toggle correctly.
- Keyboard navigation support, allowing users to toggle the toggle switch using the keyboard.
- Visual focus indicators to help users navigate the component.

### Labels
Include a label property to provide accessible text for screen readers.
<Canvas of={NysToggleStories.Labels} />

## Slots
<table>
    <thead>
    <tr>
        <th>Slot name</th>
        <th>Description</th>
        <th>Default value</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>`description`</td>
        <td>Allows insertion of custom HTML description content into the component.</td>
        <td>""</td>
    </tr>
    </tbody>
</table>

## Events
The `<nys-toggle>` component emits the following events:

1. **`nys-change`** – Fired when the toggle state changes (checked/unchecked).
2. **`nys-focus`** – Fired when the toggle gains focus.
3. **`nys-blur`** – Fired when the toggle loses focus.

**Event details** \
The event’s `detail` object includes:
- id (string): The id of the toggle.
- checked (boolean): Whether the toggle is currently checked.

You can listen to these events using JavaScript:

```js

  // Select the toggle component
  const toggle = document.querySelector('nys-toggle');

  // Listen for the 'nys-change' event
  toggle.addEventListener('nys-change', (event) => {
    const { checked } = event.detail;
    console.log('Toggle changed. Checked:', checked);
  });

  // Listen for the 'nys-focus' event
  toggle.addEventListener('nys-focus', () => {
    console.log('Checkbox is focused');
  });

  // Listen for the 'nys-blur' event
  toggle.addEventListener('nys-blur', () => {
    console.log('Checkbox lost focus');
  });
```

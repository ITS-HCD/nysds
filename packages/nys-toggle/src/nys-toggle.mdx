import { Meta, Story, Source, Canvas } from "@storybook/blocks";
import { html } from "lit";
import * as NysToggleStories from "./nys-toggle.stories";

<Meta of={NysToggleStories} title="Components/Toggle/Documentation" />

# Toggle
The **`nys-toggle`** component is a reusable web component for use in New York State digital products. It allows users to toggle an option on or off.

If an id is not passed, a unique id will be generated.

<Canvas of={NysToggleStories.ToggleSwitch} />

## Property Examples
### Checked
<Canvas of={NysToggleStories.Checked} />

### Help Texts
Add descriptive help texts using the `label` prop or HTML elements within the toggle component. \
Descriptions can be provided **BOTH** as a property or a slot. Use the `description` property for simplicity, and reserve `slot="description"` for advanced HTML customizations like links.
<Canvas of={NysToggleStories.HelpTexts} />

### Unchecked Disabled
<Canvas of={NysToggleStories.UncheckedDisabled} />

### Checked Disabled
<Canvas of={NysToggleStories.CheckedDisabled} />

### Sizes
Adjust the `size` property to see how it changes the toggle's appearance. \
Supported sizes are `sm`, `md`, and `lg`. Default size for toggle component is `md`.
<Canvas of={NysToggleStories.Sizes} />

### Disabling Icons
To remove icons from the toggle switch, use the `NoIcons` boolean property.
<Canvas of={NysToggleStories.NoIcons} />

## Events

The `NysToggle` component emits three custom events:

1. **`change`** – Fired when the toggle state changes (checked/unchecked).
2. **`focus`** – Fired when the toggle gains focus.
3. **`blur`** – Fired when the toggle loses focus.
4. **`keydown`** – Fired when a key is pressed while the toggle is focused.

You can listen to these events using JavaScript:

```js

  // Select the toggle component
  const toggle = document.querySelector('nys-toggle');

  // Listen for the 'change' event
  toggle.addEventListener('change', (event) => {
    console.log('Checkbox changed:', event.target.checked);
  });

  // Listen for the 'focus' event
  toggle.addEventListener('focus', () => {
    console.log('Checkbox is focused');
  });

  // Listen for the 'blur' event
  toggle.addEventListener('blur', () => {
    console.log('Checkbox lost focus');
  });

  // Listen for the 'keydown' event
  toggle.addEventListener('keydown', (event) => {
    console.log('Key pressed:', event.key);
  });
```

## Form Prop
The `form` attribute can be used on the **`nys-toggle`** component to associate it with a specific `<form>` element, allowing the toggle state to be included in the form submission.

### How It Works
By default, inputs within a `<form>` are automatically associated with that form, but if a toggle is outside the form, you can manually associate it using the `form` property.
```html
<!-- For example -->
<form id="myForm">
  <nys-textinput label="Label"></nys-textinput>
  <nys-textinput label="Label"></nys-textinput>
  <nys-checkbox label="Label"></nys-checkbox>
</form>
<nys-toggle form="myForm" label="Label" name="example-name"></nys-toggle>
<nys-button form="myForm">Submit that form over there</nys-button>
```

## Accessibility

The `nys-toggle` component includes the following accessibility-focused features:

- Proper ARIA roles and attributes to ensure screen readers can interpret the toggle correctly.
- Keyboard navigation support, allowing users to toggle the toggle switch using the keyboard.
- Visual focus indicators to help users navigate the component.

### Labels
Include a label property to provide accessible text for screen readers.
<Canvas of={NysToggleStories.Labels} />
import { Meta, Story, Source, Canvas, Controls } from "@storybook/blocks";
import { html } from "lit";
import * as NysToggleStories from "./nys-toggle.stories";

<Meta of={NysToggleStories} title="Components/Toggle/Documentation" />

# Toggle
The **`nys-toggle`** component is a reusable web component for use in New York State digital products. It allows users to toggle a toggle switch "on" or "off".

If an id is not passed, a unique id will be generated.

<p className="pill pill--stable">Stable</p>

<p className="pill pill--uikit"><a href="https://www.figma.com/design/0ogYpymUPQQfhELthntNbt/%F0%9F%92%A0-NYS-%2F-Excelsior-Components-(Alpha)?node-id=1626-2591&p=f&t=QF8BQ6f9JDt9M72a-0">View in Figma</a></p>

***

<Canvas of={NysToggleStories.Basic} />

<Controls />


## Variants
### Checked
<Canvas of={NysToggleStories.Checked} />

### Help Text
Add descriptive help text using the `label` and/or `description` prop for the toggle component. \
Descriptions can be provided **BOTH** as a property or a slot. Use the `description` property for simplicity, and reserve `slot="description"` for advanced HTML customizations like links.
<Canvas of={NysToggleStories.HelpTexts} />

### Unchecked Disabled
<Canvas of={NysToggleStories.UncheckedDisabled} />

### Checked Disabled
<Canvas of={NysToggleStories.CheckedDisabled} />

### Sizes
Adjust the `size` property to see how it changes the toggle's appearance. \
Supported sizes are `sm` and `md`. **Default size for toggle component is `md`.**
<Canvas of={NysToggleStories.Sizes} />

### Disabling Icons
To remove icons from the toggle switch, use the `NoIcons` boolean property.
<Canvas of={NysToggleStories.NoIcons} />

## Usage

### When to use this component
  - Consider using `nys-toggle` when expecting immediate UI effects when turning switch on/off.
  - Ideal for settings pages, feature toggles, or user preferences.

### When to consider something else
  - Consider using `nys-checkbox` or `nys-radiobutton` to select one or more options from a list where the selections
  - Use `nys-checkbox` for forms, especially when you're not expecting immediate action.

<div className="nys-grid-row nys-grid-gap-lg">
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--do">
      ### <nys-icon name="check_circle" color="--var(nys-color-success)" /> Do
      - Provide a clear label and optional description to explain the toggle's purpose.
      - Show the UI for toggle’s state is visually distinct for on/off positions.
    </div>
  </div>
  <div className="nys-mobile-lg:nys-grid-col">
    <div className="usage-card usage-card--dont">
      ### <nys-icon name="error" color="--var(nys-color-warning)" /> Don't
      - Use toggles for complex multi-state options.
      - Overuse toggles for trivial settings that do not impact user experience significantly.
      - Hide labels entirely unless another accessible method of describing the toggle exists.
    </div>
  </div>
</div>

## Form Prop
The form attribute associates the `nys-toggle` component with a specific `<form>` element, regardless of its location on the page. This ensures that the toggle's state is included in the form submission, whether it is inside the `<form>` element or outside it.

## Events
The `<nys-toggle>` component emits three custom Javascript events:

1. **`change`** – Fired when the toggle state changes (checked/unchecked).
2. **`focus`** – Fired when the toggle gains focus.
3. **`blur`** – Fired when the toggle loses focus.
4. **`keydown`** – Fired when a key is pressed while the toggle is focused.

You can listen to these events using JavaScript:

```js

  // Select the toggle component
  const toggle = document.querySelector('nys-toggle');

  // Listen for the 'change' event
  toggle.addEventListener('change', (event) => {
    console.log('Checkbox changed:', event.target.checked);
  });

  // Listen for the 'focus' event
  toggle.addEventListener('focus', () => {
    console.log('Checkbox is focused');
  });

  // Listen for the 'blur' event
  toggle.addEventListener('blur', () => {
    console.log('Checkbox lost focus');
  });

  // Listen for the 'keydown' event
  toggle.addEventListener('keydown', (event) => {
    console.log('Key pressed:', event.key);
  });
```

## Accessibility

The `nys-toggle` component includes the following accessibility-focused features:

- Proper ARIA roles and attributes to ensure screen readers can interpret the toggle correctly.
- Keyboard navigation support, allowing users to toggle the toggle switch using the keyboard.
- Visual focus indicators to help users navigate the component.

### Labels
Include a label property to provide accessible text for screen readers.
<Canvas of={NysToggleStories.Labels} />

## Slots
<table>
    <thead>
    <tr>
        <th>Slot name</th>
        <th>Description</th>
        <th>Default value</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>`description`</td>
        <td>Allows insertion of custom HTML description content into the component.</td>
        <td>""</td>
    </tr>
    </tbody>
</table>
